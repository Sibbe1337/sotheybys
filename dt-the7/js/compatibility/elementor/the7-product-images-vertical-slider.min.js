jQuery((function(e){e.verticalProductSlider=function(t){let i,n,o,s,r,a=e(t),l=a.find(".mainImageList"),d=(a.find(".the7-zoom-on-hover").find("img"),a.find(".thumbs-slides-wrapper")),c=a.find(".gallery-video-wrap"),p=a.find(".the7-video-overlay"),u=d.find(".the7-swiper-slide");a.find(".owl-dot");var h=!1,f=null,m=null;e.data(t,"verticalProductSlider",a),i={init:function(){a.layzrInitialisation(),a.css("--widget-thumbs-height",window.innerHeight-a[0].getBoundingClientRect().top+"px"),a.css("--widget-thumbs-position-top",a[0].getBoundingClientRect().top+window.scrollY+"px"),n=new The7ElementorSettings(a),o=n.getSettings(),controls=!!o.controls,r=!!o.video_autoplay,playOnMobile=!!o.play_on_mobile,s=elementorFrontend.getCurrentDeviceMode(),this.initThumb(),i.onScrollTargetChanged(),i.zoomOnHover(),i.clickThumbs(),"y"===o.open_lightbox&&a.find(".dt-gallery-container").initPhotoswipe(),"y"!==o.open_lightbox&&controls||a.on("click","video",(function(){this.paused?this.play():this.pause()})),p.length&&p.is(":visible")&&"y"!==o.open_lightbox?c.on("click",(function(t){var n=e(this);n.hasClass("playing-video")||(n.find(".the7-video-overlay").remove(),i.playPauseVideo(n,"play"),n.addClass("playing-video"))})):("desktop"===s&&r||"mobile"===s&&r&&playOnMobile)&&c.each((function(){var t=e(this);i.playPauseVideo(t,"play")})),e(".variations_form").on("found_variation",(function(e,t){var i=a.find(".dt-gallery-container");if(t&&t.image&&t.image.src){var n=t.image.src,o=i.find('img[src="'+n+'"]');if(o.length){var s=o.offset().top-a.offset().top+a.scrollTop()+2;a[0].scrollTo({top:s})}}})),a.refresh()},initThumb:async function(){const e=elementorFrontend.utils.swiper;d.length&&(swiperThumbs=await new e(d,this.getThumbsOptions()),a.css("opacity",1))},getThumbsOptions:function(){o.thumbs_items;swiperOptions={grabCursor:!0,observeParents:!1,watchSlidesProgress:!0,slidesPerView:"auto",speed:600,threshold:20,slideClass:"the7-swiper-slide",direction:"vertical"};return swiperOptions.navigation={prevEl:d.siblings(".the7-thumbs-swiper-button-prev")[0],nextEl:d.siblings(".the7-thumbs-swiper-button-next")[0]},o.thumbs_spacing&&(swiperOptions.spaceBetween=this.getSpaceBetweenThumbs()),breakpoints=elementorFrontend.config.responsive.activeBreakpoints,swiperOptions.breakpoints={},Object.keys(breakpoints).forEach((e=>{let t=breakpoints[e].value;swiperOptions.breakpoints[t]={},o.thumbs_spacing&&(swiperOptions.breakpoints[t].spaceBetween=i.getSpaceBetweenThumbs(e))})),swiperOptions=i.adjustBreakpointsConfig(swiperOptions),swiperOptions},adjustBreakpointsConfig(e){const t=elementorFrontend.config.responsive.activeBreakpoints,i=elementorFrontend.breakpoints.getBreakpointValues();return Object.keys(e.breakpoints).forEach((n=>{const o=parseInt(n);let s;if(o===t.mobile.value||o+1===t.mobile.value)s=0;else{if(t.widescreen&&(o===t.widescreen.value||o+1===t.widescreen.value))return;{const e=i.findIndex((e=>o===e||o+1===e));if(-1===e)return;s=i[e-1]}}e.breakpoints[s]=e.breakpoints[n],e.breakpoints[n]={slidesPerView:e.slidesPerView,slidesPerGroup:e.slidesPerGroup?e.slidesPerGroup:1},"spaceBetween"in e&&(e.breakpoints[n].spaceBetween=e.spaceBetween)})),e},getSpaceBetweenThumbs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return The7ElementorSettings.getResponsiveControlValue(o,"thumbs_spacing","size",e)||0},clickThumbs:function(){u.length&&e(".the7-swiper-slide, .owl-dot",a).on("click",(function(t){t.preventDefault(),h=!0;var i=e(this),n=i[0].getAttribute("href").substring(1),o=document.getElementById(n);if(o){if(e(o).length){var s=e(o).offset().top-a.offset().top+a.scrollTop();a[0].scrollTo({top:s})}i.addClass("swiper-slide-thumb-active active").siblings().removeClass("swiper-slide-thumb-active active"),clearTimeout(m),m=setTimeout((function(){l.layzrInitialisation()}),400)}clearTimeout(f),f=setTimeout((function(){h=!1}),800)}))},onScrollTargetChanged:function(){if(!h){var t=a.scrollTop(),i=a.offset().top;l.find(".the7-image-wrapper").each((function(n){var o=e(this),s=o.offset().top-i+t,r=o.outerHeight();if(t>=s&&t<s+r){var a=o.find("img, video").attr("id"),d=e('.the7-swiper-slide[href="#'+a+'"]'),c=e('.owl-dot[href="#'+a+'"]');d.addClass("swiper-slide-thumb-active").siblings().removeClass("swiper-slide-thumb-active"),c.addClass("active").siblings().removeClass("active");var p=d.index();return"undefined"!=typeof swiperThumbs&&swiperThumbs.slideTo(p),l.layzrInitialisation(),!1}}))}},zoomOnHover(){"y"===o.zoom_on_hover&&e(".mobile-false").length>0&&document.querySelectorAll(".the7-zoom-on-hover img").forEach((e=>{e.addEventListener("mousemove",(t=>{const{left:i,top:n,width:o,height:s}=e.getBoundingClientRect(),r=(t.clientX-i)/o*100,a=(t.clientY-n)/s*100;e.style.transformOrigin=`${r}% ${a}%`,e.style.transform="scale(2)"})),e.addEventListener("mouseleave",(()=>{e.style.transform="scale(1)",e.style.transformOrigin="center center"}))}))},playPauseVideo:function(e,t){var s,r,a,l,d;if(o=n.getSettings(),l=!!o.mute,d=!!o.loop,s=e.find("iframe").length>0?e.find("iframe").attr("title").split(" ")[0]:"video",r=e.find("iframe").get(0),"vimeo"===s)switch(t){case"play":0,i.postMessageToPlayer(r,{method:"play",value:1});break;case"pause":i.postMessageToPlayer(r,{method:"pause",value:1})}else if("youtube"===s)switch(t){case"play":l&&i.postMessageToPlayer(r,{event:"command",func:"mute"}),i.postMessageToPlayer(r,{event:"command",func:"playVideo"}),d&&i.postMessageToPlayer(r,{event:"command",func:"loop"});break;case"pause":i.postMessageToPlayer(r,{event:"command",func:"pauseVideo"})}else"video"===s&&null!=(a=e.find("video").get(0))&&("play"===t?a.play():a.pause())},postMessageToPlayer:function(e,t){null!=e&&null!=t&&e.contentWindow.postMessage(JSON.stringify(t),"*")},handleResize:function(){i.getSpaceBetweenThumbs(),a.css("--widget-thumbs-height",window.innerHeight-a[0].getBoundingClientRect().top+"px"),a.css("--widget-thumbs-position-top",a[0].getBoundingClientRect().top+window.scrollY+"px");const e=elementorFrontend.getCurrentDeviceMode();"undefined"!=typeof swiperThumbs&&e!=s&&swiperThumbs.update(),s=e},bindEvents:function(){elementorFrontend.elements.$window.on("the7-resize-width-debounce",i.handleResize),a.bind("scroll",i.onScrollTargetChanged)},unBindEvents:function(){elementorFrontend.elements.$window.off("the7-resize-width-debounce",i.handleResize)}},a.refresh=function(){o=n.getSettings(),i.unBindEvents(),i.bindEvents(),i.handleResize()},a.delete=function(){i.unBindEvents(),a.removeData("verticalProductSlider")},i.init()},e.fn.verticalProductSlider=function(){return this.each((function(){var t=e(this).data("imageBox");void 0!==t&&t.delete(),new e.verticalProductSlider(this)}))}})),jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-images-vertical-slider.default",(function(e,t){t(document).ready((function(){e.verticalProductSlider()}))}))}));